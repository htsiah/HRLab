@import helper._
@import play.api.Play.current
@import play.api.i18n.Messages.Implicits._

@(claimworkflow:Form[ClaimWorkflow], applicableSelections:List[String], assignedToSelections:List[String], oid:String="")(implicit session: play.api.mvc.Session)

@pageheader = {
	<div class="page-header">
		@if(oid=="") {	
			<h1>Admin <small><i class="ace-icon fa fa-angle-double-right"></i> Claim Setting <i class="ace-icon fa fa-angle-double-right"></i> Claim Workflow <i class="ace-icon fa fa-angle-double-right"></i> New</small></h1>
		} else {
			<h1>Admin <small><i class="ace-icon fa fa-angle-double-right"></i> Claim Setting <i class="ace-icon fa fa-angle-double-right"></i> Claim Workflow</small></h1>
		}
	</div>
}

@pluginjs = {
	<script src="@routes.Assets.at("layout/jquery.validate/jquery.validate.min.js")"></script>
	<script src="@routes.Assets.at("layout/jquery.chosen/chosen.jquery.min.js")"></script>
	<script src="@routes.Assets.at("layout/ace/js/fuelux/fuelux.spinner.min.js")" type="text/javascript"></script>
}

@inlinejs = {
	<script src="@routes.Assets.at("javascripts/claimworkflow.form.js")" type="text/javascript"></script>
	<script>
		let oid = "@oid";
	</script>
}

@pluginstyle = {
	<link href="@routes.Assets.at("stylesheets/common.jquery.validation.css")" rel="stylesheet" media="screen">
	<link href="@routes.Assets.at("layout/jquery.chosen/chosen.modify.min.css")" rel="stylesheet" media="screen">
}

@inlinestyle = {}

@buttons = {
	<a href="#" onclick="$('#claimworkflowform').submit()" class="btn btn-sm btn-block">Save</a>
	<a href="javascript:history.back()" class="btn btn-sm btn-block">Back</a>
}

@optionSelected(values: List[String], valueCheck: String) = {
	@if(values.contains(valueCheck)) { selected="selected"  }
}

@optionSingleSelected(values: String, valueCheck: String) = {
	@if(values == valueCheck) { selected="selected"  }
}

@radioSelected(value: Option[String], valueCheck: String) = {
	@if(value != None){
		@if(value.get.contains(valueCheck)){
			checked="checked"
		}
	}
}

@layout.ace.main93(session.get("company").get + " - HRSifu",pageheader,pluginjs,inlinejs,pluginstyle,inlinestyle,buttons) {

	@helper.form(
		action = (
			if(oid=="")
				routes.ClaimWorkflowController.insert
			else
				routes.ClaimWorkflowController.update(oid)
		), 
		'id -> "claimworkflowform"
	) {
		@inputText(claimworkflow("wf"), '_label->"Workflow", '_class->"dl-horizontal", '_showConstraints->false, 'class->"form-control")
		<dl class="dl-horizontal " id="app_field">
    		<dt><label for="app">Applicable</label></dt>
    		<dd>
    			<div class="row">
					<div class="col-xs-12 col-sm-8">
						<select name="app[]" class="chosen-select tag-input-style form-control" id="app" multiple="multiple">
            				@for((applicableSelection, index) <- applicableSelections.zipWithIndex) {
            					<option value="@applicableSelection" @optionSelected(claimworkflow.value.get.app, applicableSelection)>@applicableSelection.split("@|@").head</option>
            				}
            			</select>
            		</div>
					<div class="col-xs-6 col-sm-4">
						<div class="checkbox" style="display: inline-block;">
							<label>
								<input type="checkbox" value="true" name="d" id="d" class="ace" @radioSelected(claimworkflow("d").value, "true")>
								<span class="lbl"> Default</span>
							</label>
						</div>
					</div>
				</div>
    		</dd>
    	</dl>	
    	
    	<div class="widget-box transparent">
    		<div class="widget-header widget-header-flat">
				<h4 class="widget-title lighter">
					<i class="fa fa-cog"></i>
					Workflow Steps
				</h4>
			</div>

			<div class="widget-body" style="display: block;">
				<div class="widget-main no-padding">
					<table class="table table-bordered table-striped">
						<thead class="thin-border-bottom">
							<tr>
								<th class="text-center">#</th>
								<th class="text-center">Status</th>
								<th class="text-center">Assigned To</th>
								<th class="text-center" width="20%">Applied when Claim Amount Greater Than</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="text-center">1</td>
								<td class="text-center"><input type="text" id="s_s1" name="s.s1" class="form-control" value="@claimworkflow("s.s1").value"></td>
								<td>
									<select name="at.at1" class="chosen-select-single form-control" id="at_at1" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at1, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at1, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at1, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg1" name="cg.cg1" value=@claimworkflow("cg.cg1").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">2</td>
								<td class="text-center"><input type="text" id="s_s2" name="s.s2" class="form-control" value="@claimworkflow("s.s2").value"></td>
								<td>
									<select name="at.at2" class="chosen-select-single form-control" id="at_at2" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at2, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at2, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at2, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg2" name="cg.cg2" value=@claimworkflow("cg.cg2").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">3</td>
								<td class="text-center"><input type="text" id="s_s3" name="s.s3" class="form-control" value="@claimworkflow("s.s3").value"></td>
								<td>
									<select name="at.at3" class="chosen-select-single tag-input-style form-control" id="at_at3" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at3, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at3, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at3, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg3" name="cg.cg3" value=@claimworkflow("cg.cg3").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">4</td>
								<td class="text-center"><input type="text" id="s_s4" name="s.s4" class="form-control" value="@claimworkflow("s.s4").value"></td>
								<td>
									<select name="at.at4" class="chosen-select-single tag-input-style form-control" id="at_at4" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at4, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at4, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at4, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg4" name="cg.cg4" value=@claimworkflow("cg.cg4").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">5</td>
								<td class="text-center"><input type="text" id="s_s5" name="s.s5" class="form-control" value="@claimworkflow("s.s5").value"></td>
								<td>
									<select name="at.at5" class="chosen-select-single tag-input-style form-control" id="at_at5" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at5, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at5, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at5, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg5" name="cg.cg5" value=@claimworkflow("cg.cg5").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">6</td>
								<td class="text-center"><input type="text" id="s_s6" name="s.s6" class="form-control" value="@claimworkflow("s.s6").value"></td>
								<td>
									<select name="at.at6" class="chosen-select-single tag-input-style form-control" id="at_at6" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at6, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at6, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at6, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg6" name="cg.cg6" value=@claimworkflow("cg.cg6").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">7</td>
								<td class="text-center"><input type="text" id="s_s7" name="s.s7" class="form-control" value="@claimworkflow("s.s7").value"></td>
								<td>
									<select name="at.at7" class="chosen-select-single tag-input-style form-control" id="at_at7" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at7, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at7, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at7, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg7" name="cg.cg7" value=@claimworkflow("cg.cg7").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">8</td>
								<td class="text-center"><input type="text" id="s_s8" name="s.s8" class="form-control" value="@claimworkflow("s.s8").value"></td>
								<td>
									<select name="at.at8" class="chosen-select-single tag-input-style form-control" id="at_at8" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at8, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at8, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at8, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg8" name="cg.cg8" value=@claimworkflow("cg.cg8").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">9</td>
								<td class="text-center"><input type="text" id="s_s9" name="s.s9" class="form-control" value="@claimworkflow("s.s9").value"></td>
								<td>
									<select name="at.at9" class="chosen-select-single tag-input-style form-control" id="at_at9" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at9, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at9, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at9, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg9" name="cg.cg9" value=@claimworkflow("cg.cg9").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
							<tr>
								<td class="text-center">10</td>
								<td class="text-center"><input type="text" id="s_s10" name="s.s10" class="form-control" value="@claimworkflow("s.s10").value"></td>
								<td>
									<select name="at.at10" class="chosen-select-single tag-input-style form-control" id="at_at10" data-placeholder="Please select">
										<option value="">  </option>
										<option value="[Employee’s Manager]" @optionSingleSelected(claimworkflow.value.get.at.at10, "[Employee’s Manager]")>[Employee’s Manager]</option>
										<option value="[Employee’s Substitute Manager]" @optionSingleSelected(claimworkflow.value.get.at.at10, "[Employee’s Substitute Manager]")>[Employee’s Substitute Manager]</option>
            							@for((assignedToSelection, index) <- assignedToSelections.zipWithIndex) {
            								<option value="@assignedToSelection" @optionSingleSelected(claimworkflow.value.get.at.at10, assignedToSelection)>@assignedToSelection.split("@|@").head</option>
            							}
            						</select>
								</td>
								<td class="text-center">
									<div class="ace-spinner touch-spinner">
										<input type="text" id="cg_cg10" name="cg.cg10" value=@claimworkflow("cg.cg10").value class="input-mini spinner-input form-control" maxlength="5">
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div><!-- /.widget-main -->
			</div><!-- /.widget-body -->
		</div>

		<div class="hidden">		
			@inputText(claimworkflow("_id"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa1"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa2"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa3"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa4"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa5"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa6"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa7"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa8"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa9"),'type -> "hidden")
			@inputText(claimworkflow("caa")("caa10"),'type -> "hidden")
			@inputText(claimworkflow("sys")("eid"),'type -> "hidden")
			@inputText(claimworkflow("sys")("cdat"),'type -> "hidden")
			@inputText(claimworkflow("sys")("mdat"),'type -> "hidden")
			@inputText(claimworkflow("sys")("mby"),'type -> "hidden")
			@inputText(claimworkflow("sys")("ddat"),'type -> "hidden")
			@inputText(claimworkflow("sys")("dby"),'type -> "hidden")
			@inputText(claimworkflow("sys")("ll"),'type -> "hidden")
		</div>
	}
}