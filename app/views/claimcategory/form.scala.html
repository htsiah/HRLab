@import helper._
@import play.api.Play.current
@import play.api.i18n.Messages.Implicits._

@(claimcategory:Form[ClaimCategory], applicableSelections:List[String], oid:String="")(implicit session: play.api.mvc.Session)

@pageheader = {
	<div class="page-header">
		@if(oid=="") {	
			<h1>Admin <small><i class="ace-icon fa fa-angle-double-right"></i> Claim Setting <i class="ace-icon fa fa-angle-double-right"></i> Claim Category <i class="ace-icon fa fa-angle-double-right"></i> New</small></h1>
		} else {
			<h1>Admin <small><i class="ace-icon fa fa-angle-double-right"></i> Claim Setting <i class="ace-icon fa fa-angle-double-right"></i> Claim Category</small></h1>
		}
	</div>
}

@pluginjs = {
	<script src="@routes.Assets.at("layout/jquery.validate/jquery.validate.min.js")"></script>
	<script src="@routes.Assets.at("layout/jquery.chosen/chosen.jquery.min.js")"></script>
	<script src="@routes.Assets.at("layout/ace/js/jquery.hotkeys.js")"></script>
	<script src="@routes.Assets.at("layout/ace/js/bootstrap-wysiwyg.js")"></script>
}

@inlinejs = {
	<script src="@routes.Assets.at("javascripts/claimcategory.form.js")" type="text/javascript"></script>
	<script>
		let oid = "@oid";
	</script>
}

@pluginstyle = {
	<link href="@routes.Assets.at("stylesheets/common.jquery.validation.css")" rel="stylesheet" media="screen">
	<link href="@routes.Assets.at("layout/jquery.chosen/chosen.modify.min.css")" rel="stylesheet" media="screen">
}

@inlinestyle = {}

@buttons = {
	<a href="#" onclick="$('#claimcategoryform').submit();" class="btn btn-sm btn-block">Save</a>
	<a href="javascript:history.back()" class="btn btn-sm btn-block">Back</a>	
}

@optionSelected(values: List[String], valueCheck: String) = {
	@if(values.contains(valueCheck)) { selected="selected"  }
}

@radioSelected(value: Option[String], valueCheck: String) = {
	@if(value != None){
		@if(value.get.contains(valueCheck)){
			checked="checked"
		}
	}
}

@layout.ace.main93(session.get("company").get + " - HRSifu",pageheader,pluginjs,inlinejs,pluginstyle,inlinestyle,buttons) {

	@helper.form(
		action = (
			if(oid=="")
				routes.ClaimCategoryController.insert
			else
				routes.ClaimCategoryController.update(oid)
		), 
		'id -> "claimcategoryform"
	) {
		@inputText(claimcategory("cat"), '_label->"Category", '_class->"dl-horizontal", '_showConstraints->false, 'class->"form-control")
		@inputText(claimcategory("glc"), '_label->"GL Code", '_class->"dl-horizontal", '_showConstraints->false, 'class->"form-control")
		<dl class="dl-horizontal " id="app_field">
    		<dt><label for="app">Applicable</label></dt>
    		<dd>
    			<div class="row">
					<div class="col-xs-12 col-sm-8">
						<select name="app[]" class="chosen-select tag-input-style form-control" id="app" multiple="multiple">
            				@for((applicableSelection, index) <- applicableSelections.zipWithIndex) {
            					<option value="@applicableSelection" @optionSelected(claimcategory.value.get.app, applicableSelection)>@applicableSelection.split("@|@").head</option>
            				}
            			</select>
            		</div>
					<div class="col-xs-6 col-sm-4">
						<div class="checkbox" style="display: inline-block;">
							<label>
								<input type="checkbox" value="true" name="all" id="all" class="ace" @radioSelected(claimcategory("all").value, "true")>
								<span class="lbl"> Everyone</span>
							</label>
						</div>
					</div>
				</div>
    		</dd>
    	</dl>
    	@input(claimcategory("tlim"), '_label->"Transaction Limit", '_class->"dl-horizontal", '_showConstraints->false) { (id, name, value, args) =>
    		<div class="row">
    			<div class="col-xs-10 col-sm-8">
    				<input type="text" id="@id" name="@name" value="@value" class="form-control" @toHtmlArgs(args)>
    			</div>
    			<div class="col-xs-2 col-sm-4">
    				<span class="help-button" data-rel="popover" data-trigger="hover" data-placement="left" data-content="This option is to set expense claim limit on each submission. For no limit, set 0." data-original-title="Transaction Limit">?</span>
    			</div>
    		</div>
		}		
		<dl class="dl-horizontal " id="app_field">
    		<dt><label for="app">Description of Help Text</label></dt>
    		<dd>
    		<div class="row">
    			<div class="col-xs-10 col-sm-8">
    				<div id="hlp-editor" class="wysiwyg-editor"><!-- custom html data --></div>
    			</div>
    			<div class="col-xs-2 col-sm-4">
    				<span class="help-button" data-rel="popover" data-trigger="hover" data-placement="left" data-content="This text will be display in the expense claim description when this category is selected." data-original-title="Description of Help Text">?</span>
    			</div>
    		</div>
    			
    		</dd>
    	</dl>
		<div class="hidden">		
			@inputText(claimcategory("_id"),'type -> "hidden")
			@inputText(claimcategory("hlp"),'type -> "hidden")
			@inputText(claimcategory("sys")("eid"),'type -> "hidden")
			@inputText(claimcategory("sys")("cdat"),'type -> "hidden")
			@inputText(claimcategory("sys")("mdat"),'type -> "hidden")
			@inputText(claimcategory("sys")("mby"),'type -> "hidden")
			@inputText(claimcategory("sys")("ddat"),'type -> "hidden")
			@inputText(claimcategory("sys")("dby"),'type -> "hidden")
			@inputText(claimcategory("sys")("ll"),'type -> "hidden")
		</div>
	}
}