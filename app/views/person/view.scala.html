@(person:Person, manager:Person, leaveprofiles: List[LeaveProfile])(implicit session: play.api.mvc.Session)

@pageheader = {
		<div class="page-header">
			<h1>Company <small><i class="ace-icon fa fa-angle-double-right"></i> Staff Directory <i class="ace-icon fa fa-angle-double-right"></i> @(person.p.fn + " " + person.p.ln)</small></h1>
		</div>
}

@pluginjs = {
	<script src="@routes.Assets.at("layout/jquery-ui/javascripts/jquery-ui-1.10.3.full.min.js")"></script>
	<script src="@routes.Assets.at("layout/jquery-ui/javascripts/jquery.ui.touch-punch.min.js")"></script>
}

@inlinejs = {
	<script src="@routes.Assets.at("javascripts/common.dialogbox.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/person.view.js")" type="text/javascript"></script>
}

@pluginstyle = {
	<link rel="stylesheet" href="@routes.Assets.at("layout/jquery-ui/stylesheets/jquery-ui-1.10.3.full.min.css")" />
}

@inlinestyle = {}

@pbuttons = {
	<a href="@routes.PersonController.edit(person._id.stringify)" class="btn btn-sm btn btn-block">Edit</a>	
	<a href="javascript:history.back()" class="btn btn-sm btn btn-block">Back</a>	
}

@lbuttons = {
	<a href="@routes.LeaveProfileController.create(person._id.stringify)" class="btn btn-sm btn btn-block">Add Leave Profile</a>	
	<a href="javascript:history.back()" class="btn btn-sm btn btn-block">Back</a>	
}

@vbuttons = {
	<a href="javascript:history.back()" class="btn btn-sm btn btn-block">Back</a>	
}

@contentRow(label: String, contentVal: String, cssClass:String="") = {
	@if(contentVal.trim() == "") {
		<dl class="dl-horizontal"><dt><label>@label</label></dt><dd class="@cssClass">&nbsp</dd></dl>
	} else {
		<dl class="dl-horizontal"><dt><label>@label</label></dt><dd class="@cssClass">@contentVal</dd></dl>
	}
}

@if(session.get("roles").get.contains("Admin")) {
	@layout.ace.main(session.get("company").get + " | HRSifu.my",pluginjs,inlinejs,pluginstyle,inlinestyle) {
		@pageheader
		<div class="tabbable">
			<ul class="nav nav-tabs" id="myTab">
				<li class="active">
					<a data-toggle="tab" href="#home">
						General
					</a>
				</li>
	
				<li class="">
					<a data-toggle="tab" href="#messages">
						Leave Profile(s)
					</a>
				</li>
			</ul>
	
			<div class="tab-content">
				<div id="home" class="tab-pane fade active in">
					<div class="row">
						<div class="col-sm-9">
							@contentRow("First Name", person.p.fn)
							@contentRow("Last Name", person.p.ln)
							@contentRow("Email", person.p.em)
							@contentRow("Position", person.p.pt)
							@contentRow("Manager", manager.p.fn + " " + manager.p.ln)
							@contentRow("Gender", person.p.g)
							@contentRow("Marital Status", person.p.ms)
							@contentRow("Department", person.p.dpm)
							@contentRow("Office", person.p.off)
							@contentRow("Join Date", person.p.edat.get.toLocalDate().toString())
							<dl class="dl-horizontal">
								<dt><label>Work Day</label></dt>
								<dd>
									@if(person.wd.wd1==true) {Monday}
									@if(person.wd.wd2==true) {Tuesday}
									@if(person.wd.wd3==true) {Wednesday}
									@if(person.wd.wd4==true) {Thursday}
									@if(person.wd.wd5==true) {Friday}
									@if(person.wd.wd6==true) {Saturday}
									@if(person.wd.wd6==true) {Sunday}
								</dd>
							</dl>
							@if(person.p.rl.toString!="List()") {
								@contentRow("Role", person.p.rl.mkString(","))
							}
						</div>@** /.col-xs-9 **@
						<div class="col-sm-3">
							@pbuttons
						</div>@** /.col-xs-3 **@
					</div>@** /.row **@ 
				</div>
	
				<div id="messages" class="tab-pane fade">
					<div class="row">
						<div class="col-sm-9">
							<div class="table-responsive">
								<table id="leavetable" class="table table-striped table-bordered table-hover">
									<thead><tr>
										<th>Leave Type</th>
										<th>Entitlement</th>
										<th>Earned</th>
										<th>Adjustment</th>
										<th>Carry Forward</th>
										<th>Total Utilized</th>
										<th>Total Expired</th>
										<th>Pending Approval</th>
										<th>Balance</th>
										<th>Closing Balance</th>
										<th width="100px">&nbsp;</th>
									</tr></thead>
									<tbody>
										@leaveprofiles.map{ leaveprofile =>
											<tr>
												<td>@leaveprofile.lt</td>
												<td>@leaveprofile.cal.ent</td>
												<td>@leaveprofile.cal.ear</td>
												<td>@leaveprofile.cal.adj</td>
												<td>@leaveprofile.cal.cf</td>
												<td>@(leaveprofile.cal.cfuti + leaveprofile.cal.uti)</td>
												<td>@leaveprofile.cal.cfexp</td>
												<td>@leaveprofile.cal.papr</td>
												<td>@leaveprofile.cal.bal</td>
												<td>@leaveprofile.cal.cbal</td>
												<td>
													<div class="btn-group">
														<a class="btn btn-xs btn-success" title="View" href="@routes.LeaveProfileController.view(leaveprofile._id.stringify)">
															<i class="ace-icon fa fa-search-plus bigger-120"></i>
														</a>
														<a class="btn btn-xs btn-info" title="Edit" href="@routes.LeaveProfileController.edit(leaveprofile._id.stringify)">
															<i class="ace-icon fa fa-pencil bigger-120"></i>
														</a>
														<a class="btn btn-xs btn-danger" href="javascript:onDeleteLeaveProfile('@leaveprofile._id.stringify', '@leaveprofile.lt', '@person._id.stringify')" title="Delete">
															<i class="ace-icon fa fa-trash-o bigger-120"></i>
														</a>
													</div>
												</td>
											</tr>
										}
									</tbody>
								</table>
							</div>@** /.table-responsive **@
						</div>@** /.col-xs-9 **@
						<div class="col-sm-3">
							@lbuttons
						</div>@** /.col-xs-3 **@
					</div>@** /.row **@ 
				</div>
			</div>
		</div>
		@layout.ace.dialogbox("dialog-message", Html("<div class='alert alert-info bigger-110'><p>Selected leave profile will be permanently deleted and cannot be recovered.</p><p>Notes:<ul><li>Leave that linked to this leave profile will be locked.</li><li>No workflow action can be perform on lock document.</li></ul></p></div>"))
	}
} else {

	@layout.ace.main93("Human Resources Software",pageheader,pluginjs,inlinejs,pluginstyle,inlinestyle,vbuttons) {
		@contentRow("First Name", person.p.fn)
		@contentRow("Last Name", person.p.ln)
		@contentRow("Email", person.p.em)
		@contentRow("Position Type", person.p.pt)
		@contentRow("Manager", manager.p.fn + " " + manager.p.ln)
		@contentRow("Gender", person.p.g)
		@contentRow("Marital Status", person.p.ms)
		@contentRow("Department", person.p.dpm)
		@contentRow("Office", person.p.off)
		@contentRow("Join Date", person.p.edat.get.toLocalDate().toString())
		<dl class="dl-horizontal">
			<dt><label>Work Day</label></dt>
			<dd>
				@if(person.wd.wd1==true) {Monday}
				@if(person.wd.wd2==true) {Tuesday}
				@if(person.wd.wd3==true) {Wednesday}
				@if(person.wd.wd4==true) {Thursday}
				@if(person.wd.wd5==true) {Friday}
				@if(person.wd.wd6==true) {Saturday}
				@if(person.wd.wd6==true) {Sunday}
			</dd>
		</dl>
		@if(person.p.rl.toString!="List()") {
			@contentRow("Role", person.p.rl.mkString(","))
		}
	}

}